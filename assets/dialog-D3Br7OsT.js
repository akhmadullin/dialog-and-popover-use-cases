import{j as p,c as x}from"./index-CMu3Kjdk.js";import{r as c}from"./index-DVXBtNgz.js";const L=(n,t,r)=>{c.useEffect(()=>{const e=n.current;if(e){if(r&&!e.open){e[t?"showModal":"show"]();return}!r&&e.open&&e.close()}},[t,r])},w=(n,t,r)=>{c.useEffect(()=>{if(!t||!r)return;const e=n.current;if(!e)return;const o=s=>{const u=e.getBoundingClientRect();(s.clientX<u.left||s.clientX>u.right||s.clientY<u.top||s.clientY>u.bottom)&&e.close()};return e.addEventListener("click",o),()=>{if(!t||!r)return;const s=n.current;s&&s.removeEventListener("click",o)}},[r,t])},k=(n,t,r,e)=>{c.useEffect(()=>{if(!t)return r?e.queue.push(n):e.queue=e.queue.filter(o=>o!==n),()=>{t||(e.queue=e.queue.filter(o=>o!==n))}},[t,r])},b=(n,t,r,e,o)=>{c.useEffect(()=>{if(r||!e)return;const s=n.current;if(!s)return;const u=i=>{t===o.queue[o.queue.length-1]&&(s.contains(i.target)||s.close())},l={passive:!0};return document.addEventListener("mousedown",u,l),document.addEventListener("touchstart",u,l),()=>{r||!e||!n.current||(document.removeEventListener("mousedown",u,l),document.removeEventListener("touchstart",u,l))}},[e,r])},C=(n,t,r,e,o)=>{c.useEffect(()=>{if(r||!e)return;const s=27,u=l=>{var i;l.keyCode===s&&t===o.queue[o.queue.length-1]&&((i=n.current)==null||i.close())};return window.addEventListener("keydown",u),()=>{r||window.removeEventListener("keydown",u)}},[r])},y="_modal_xu1ii_1",N="_nonmodal_xu1ii_21",S="_closeButton_xu1ii_33",R="_show_xu1ii_1",j="_modalWithScrollLock_xu1ii_84",f={modal:y,nonmodal:N,closeButton:S,show:R,modalWithScrollLock:j},B=()=>`${String.fromCharCode(Math.random()*26+97)}${Math.random().toString(36).substr(2,28)}`,F=n=>Object.entries(n).reduce((t,[r,e])=>(e&&(t[r]=e),t),{}),m={queue:[]},W=c.forwardRef(({isOpen:n,isModal:t,close:r,withPageScrollLock:e,withCloseOnOutsideClick:o=!1,withCloseOnEscapeForNonModal:s=!1,label:u,labeledBy:l,minWidth:i,maxWidth:E,minHeight:h,maxHeight:_,children:g,className:q},v)=>{const a=c.useRef(null),d=c.useRef(B());return c.useImperativeHandle(v,()=>a.current),L(a,t,n),w(a,t,o),k(d.current,t,n,m),b(a,d.current,t,o,m),C(a,d.current,t,s,m),p.jsxs("dialog",{ref:a,onClose:r,"aria-label":u,"aria-labelledby":l,className:x(f.modal,{[f.nonmodal]:!t,[f.modalWithScrollLock]:e},q),style:F({minWidth:i,maxWidth:E,minHeight:h,maxHeight:_}),children:[g,p.jsx("button",{type:"button","aria-label":"Закрыть диалог",onClick:r,className:f.closeButton})]})});W.__docgenInfo={description:"",methods:[],displayName:"Dialog",props:{withCloseOnOutsideClick:{defaultValue:{value:"false",computed:!1},required:!1},withCloseOnEscapeForNonModal:{defaultValue:{value:"false",computed:!1},required:!1}}};export{W as D};
